function addColorProperty(e){var t=function(e){return this._color=e,this};for(var i in SOLARIZED_COLORS)t[i]=function(t){return function(){return e.color(SOLARIZED_COLORS[t])}}(i);e.color=t}var Montage=require("./core").Montage,Logger,loggers,consoleLog,emptyLoggerFunction,getFunctionName,toTimeString,LoggerUI,localStorage;loggers=exports.loggers={},getFunctionName=function(){var e,t=getFunctionName.caller.caller;return e=t.name,""===e&&(e="anonymous"),e},toTimeString=function(e){if(e.getHours){var t=e.getHours(),i=e.getMinutes(),n=e.getSeconds();return(1===t.length?"0"+t:t)+":"+(1===i.length?"0"+i:i)+":"+(1===n.length?"0"+n:n)+"."+e.getMilliseconds()}},emptyLoggerFunction=function(){},consoleLog=function(){console.log(arguments)},Logger=exports.Logger=Montage.specialize({constructor:{value:function Logger(){this.super(),addColorProperty(this)}},init:{value:function(e,t,i){if(this.name=e,this._onStateChange=t,this._storeState=!i,this._storeState&&localStorage){var n=localStorage.getItem("_montage_logger_"+e);n&&(this.isDebug="true"===n)}return t&&this._onStateChange("true"===n),this.isError=!0,this}},name:{value:null},buffer:{value:[],distinct:!0},buffered:{value:!1},flush:{value:function(){var e,t,i=this.buffer;for(t=0;e=i[t];t++)this._formattedLog(e);this.buffer.length=0}},isDebug:{get:function(){return this.debug!==emptyLoggerFunction},set:function(e){this.debug=e?this._consoleLogMontage:emptyLoggerFunction}},isError:{get:function(){return this.error!==emptyLoggerFunction},set:function(e){this.error=e?this._consoleLogMontage:emptyLoggerFunction}},_consoleLogMontage:{value:function(){var e=arguments[0],t=e._montage_metadata;new Date,t?(Array.prototype.shift.call(arguments),Array.prototype.unshift.call(arguments,t.objectName+"."+getFunctionName(e)+"()"),this.buffered?this.buffer.push(arguments):this._formattedLog(arguments)):this.buffered?this.buffer.push(arguments):this._formattedLog(arguments)}},_formattedLog:{value:function(e){var t=e[0];colors.isDebug&&"string"==typeof t&&Array.prototype.splice.call(e,0,1,"%c"+t,this._logCss),console.log.apply(console,e)}},__logCss:{value:null},_logCss:{get:function(){return null===this.__logCss&&(this.__logCss="",this.__logCss+=this._color?"color:"+this._color+";":"color:black;"),this.__logCss}},debug:{value:emptyLoggerFunction},error:{value:emptyLoggerFunction},toTimeString:{value:toTimeString},_storeState:{value:null},_onStateChange:{value:null}});var SOLARIZED_COLORS={base03:"#002b36",base02:"#073642",base01:"#586e75",base00:"#657b83",base0:"#839496",base1:"#93a1a1",base2:"#eee8d5",base3:"#fdf6e3",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900"};exports.logger=function(e,t,i){var n;return null==(n=loggers[e])&&(n=(new Logger).init(e,t,i),Montage.defineProperty(loggers,e,{value:n})),n},LoggerUI=Montage.specialize({constructor:{value:function LoggerUI(){this.super()}},init:{value:function(){return document.nativeAddEventListener?(document.nativeAddEventListener("keyup",this,!1),document.nativeAddEventListener("keydown",this,!1)):(document.addEventListener("keyup",this,!1),document.addEventListener("keydown",this,!1)),this}},inspectorElement:{value:null},m_dontRemove:{value:null},titleHeader:{value:null},shown:{value:!1},isCtrl:{value:!1},isAlt:{value:!1},keyup:{value:function(e){17==e.which&&(this.isCtrl=!1),18==e.which&&(this.isAlt=!1)}},keydown:{value:function(e){return 17==e.which&&(this.isCtrl=!0),18==e.which&&(this.isAlt=!0),76==e.which&&this.isCtrl===!0&&this.isAlt===!0?(this.shown?this.hideInspector():this.showInspector(),!1):void 0}},change:{value:function(e){var t=e.target.checked,i=e.target.value,n=loggers[i];n.isDebug=t,n._onStateChange&&n._onStateChange(t),n._storeState&&localStorage&&localStorage.setItem("_montage_logger_"+i,t)}},mouseup:{value:function(){this.hideInspector()}},showInspector:{value:function(){if(!this.inspectorElement){var e,t,i,n,r,a,s,o,u,c,l,f=0;for(this.m_dontRemove=document.getElementsByTagName("body")[0],this.inspectorElement=document.createElement("div"),this.inspectorElement.id="_montage_logger_inspector",t=document.createElement("div"),this.inspectorElement.appendChild(t),n=document.createElement("div"),t.appendChild(n),i=document.createElement("h1"),i.className="_montage_logger_inspector-title",i.textContent="Logger Inspector",this.titleHeader=i,n.appendChild(i),u=Object.keys(loggers),f=0;e=loggers[u[f]];f++)r=document.createElement("label"),a=document.createElement("input"),l=document.createElement("span"),r.className="_montage_logger_inspector-content",l.textContent=e.name,r.appendChild(a),r.appendChild(l),a.value=e.name,a.type="checkbox",a.checked=!!e.isDebug,o="_montage_logger_"+e.name,e._storeState&&localStorage&&(s=localStorage.getItem(o),null==s&&localStorage.setItem(o,e.isDebug)),n.appendChild(r);c=document.createElement("style");var d="#_montage_logger_inspector {";d+="    border: 1px solid rgba(15,15,15,0.4);",d+="    position: fixed;",d+="    right: 25px;",d+="    top: 25px;",d+="    -webkit-border-radius: 5px;",d+="    color: #dddddd;",d+='    font: 10px "Lucida Grande","Lucida Sans", sans;',d+="    background:-webkit-gradient(linear, left top, left bottom, from(rgba(15,15,15,0.75)), to(rgba(15,15,15,0.95)) );",d+="    -webkit-box-shadow: 0 0 15px rgba(0,0,0,.3);",d+="    width: 250px;",d+="}",d+="#_montage_logger_inspector div {",d+="    -webkit-border-radius: 5px;",d+="    background: -webkit-gradient(radial, 100 -60, 0, 125 -50, 125, from(rgba(255,255,255,0.00)), to(rgba(0,0,0,.2)), color-stop(1, rgba(0,0,0,.2)));",d+="}",d+="#_montage_logger_inspector div div {",d+="    background: -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,0.2)), to(rgba(0,0,0,.1)), color-stop(0.33, rgba(255,255,255,.01)), color-stop(0.33, rgba(50,50,50,1)) );",d+="    padding: 7px 10px;",d+="    -webkit-border-radius: 3px;",d+="    overflow-x: hidden;",d+="}",d+="._montage_logger_inspector-title {",d+="    color: rgba(255,255,255,0.9);",d+="    font-size: 13px;",d+="    margin: 0 0 11px 0;",d+="    padding: 0 0 0 5px;",d+="}",d+="._montage_logger_inspector-content {",d+="    padding: 0 0 0 20px;",d+="    margin: 0;",d+="    display: block;",d+="}",c.textContent=d,document.head.appendChild(c)}this.shown=!0,this.m_dontRemove.appendChild(this.inspectorElement),this.titleHeader.nativeAddEventListener("mouseup",this,!1),this.inspectorElement.nativeAddEventListener("change",this,!1)}},hideInspector:{value:function(){document.getElementById("_montage_logger_inspector")&&(this.shown=!1,this.m_dontRemove.removeChild(this.inspectorElement),this.titleHeader.nativeRemoveEventListener("mouseup",this,!1),this.inspectorElement.nativeRemoveEventListener("change",this,!1))}},handleEvent:{enumerable:!1,value:function(e){this[e.type]&&this[e.type](e)}}});var setupUI=function(){(new LoggerUI).init()};if("undefined"!=typeof window){try{localStorage=window.localStorage}catch(e){console.log("Error accessing localStorage",e)}window.loggers=loggers,localStorage&&setupUI()}var colors=exports.logger("colors");
montageDefine("3c07db4","core/converter/number-converter",{dependencies:["../core","./converter"],factory:function(e,t){e("../core").Montage;var i=e("./converter").Converter,r=e("./converter").Validator,s=e("./converter").isNumber,n=e("./converter").isDef,a=/^([\-]?\d+\.?\d*)([K,M,G,T,P,k,m,u,n]?)[B]?$/,o=["P","T","B","M","K","","m","u","n"],c=t.NUMERIC_SCALES_SI_={"":1,n:1e-9,u:1e-6,m:.001,k:1e3,K:1e3,M:1e6,B:1e9,T:1e12,P:1e15},u=t.NUMERIC_SCALES_BINARY_={"":1,n:Math.pow(1024,-3),u:Math.pow(1024,-2),m:1/1024,k:1024,K:1024,M:Math.pow(1024,2),G:Math.pow(1024,3),T:Math.pow(1024,4),P:Math.pow(1024,5)},f=t._numericValueToString=function(e,t,i,r,s){s=s||o;var a=e,c="",u=1;0>e&&(e=-e);for(var f=0;s.length>f;f++){var l=s[f];if(u=t[l],e>=u||1>=u&&e>.1*u){c=l;break}}c?r&&(c+=r):u=1;var m=Math.pow(10,n(i)?i:2);return Math.round(a/u*m)/m+c},l=function(e,t){var i=e.match(a);return i?i[1]*t[i[2]]:0/0};t.stringToNumericValue=function(e){return e.endsWith("B")?l(e,u):l(e,c)};var m=t.numericValueToString=function(e,t){return f(e,c,t)},h=t.NumberValidator=r.specialize({allowFloat:{value:!0},allowNegative:{value:!0},validate:{value:function(e){var t;return e=e||"",e=e.replace(/,/g,""),t=s(e)?e:this.allowFloat===!0?parseFloat(e,10):parseInt(e,10),isNaN(t)?{message:"Invalid Number"}:t}}});t.NumberConverter=i.specialize({allowPartialConversion:{value:!1},validator:{value:new h},shorten:{value:null},decimals:{value:2},forceDecimals:{value:!1},round:{value:null},_reg:{value:/(\d+)(\d{3})/},allowFloat:{value:!0},allowNegative:{value:!0},_makeReadable:{value:function(e,t,i){t=t||",",i=i||".";for(var r=(""+e).split("."),s=r[0];this._reg.test(s);)s=s.replace(this._reg,"$1"+t+"$2");var n=r.length>1?r[1]:"";if(this.forceDecimals)for(;n.length<this.decimals;)n+="0";var a=n.length>0?i+n:"";return s+a}},convert:{value:function(e){if(this.shorten)return m(e,this.decimals);var t;if(this.round)t=""+Number(Math.round(e));else{var i=Math.pow(10,this.decimals||2),r=1;t=Number(Math.round(e/r*i)/i)}return this._makeReadable(t)}},revert:{value:function(e){this.validator.allowFloat=this.allowFloat,this.validator.allowNegative=this.allowNegative;var t=this.validator.validate(e);if(s(t))return t;throw Error(t.message)}}})}});
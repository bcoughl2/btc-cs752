montageDefine("daa4856","vendor/requirejs/tests/afterload.html",{text:'<!DOCTYPE html><html><head>\n    <title>require.js: After Load</title>\n    <script src=doh/runner.js></script>\n    <script src=doh/_browserRunner.js></script>\n    <script>\n    var d, s, head;\n\n    function goRequire() {\n        //Need a hack to trigger require.pageLoaded() for pre Firefox 3.6 browsers.\n        var ff = parseFloat(navigator.userAgent.split("Firefox/")[1]) || null;\n        if (ff && ff < 3.6) {\n            require.pageLoaded();\n        }\n\n        require({\n                paths: {\n                    domReady: "../domReady"\n                }\n            },\n            ["require", "simple", "domReady"],\n            function (require, simple, domReady) {\n                domReady(function() {\n                    doh.is("blue", simple.color);\n\n                    //Now test another script getting loaded will see\n                    //document.readyState === "complete".\n                    var s = document.createElement("script");\n                    s.src = "afterloadreadystate.js";\n                    s.charset = "utf-8";\n                    head.appendChild(s);\n                });\n            }\n        );\n    }\n\n    function loadRequire() {\n        var readyRegExp = /complete|loaded/;\n        function onScriptLoad(evt) {\n            var node = evt.target || evt.srcElement;\n            if (evt.type === "load" || readyRegExp.test(node.readyState)) {\n                //Clean up script binding, otherwise, Opera in particular\n                //may trigger it again.\n                if (node.removeEventListener) {\n                    node.removeEventListener("load", onScriptLoad, false);\n                } else {\n                    //Probably IE.\n                    node.detachEvent("onreadystatechange", onScriptLoad);\n                }\n                goRequire();\n            }\n        };\n\n        //Create script tag for require.js\n        s = document.createElement("script");\n        s.src = "../require.js";\n        s.charset = "utf-8";\n\n        //Set up load listener.\n        if (s.addEventListener) {\n            s.addEventListener("load", onScriptLoad, false);\n        } else {\n            //Probably IE.\n            s.attachEvent("onreadystatechange", onScriptLoad);\n        }\n\n        head = (document.getElementsByTagName("head")[0] ||\n                document.getElementsByTagName("html")[0]);\n        head.appendChild(s);\n    }\n\n    doh.register(\n        "afterload",\n        [\n            {\n                name: "afterload",\n                timeout: 5000,\n                runTest: function() {\n                    d = new doh.Deferred();\n                    return d;\n                }\n            }\n        ]\n    );\n    doh.run();\n\n    </script>\n</head>\n<body onload=loadRequire()>\n    <h1>require.js: After Load Test</h1>\n    <p>Tests adding require after the page loads, and tests that require.js patches\n    up document.readyState for Firefox less than 3.6.</p>\n    <p>Check console for messages</p>\n\n\n</body></html>'});
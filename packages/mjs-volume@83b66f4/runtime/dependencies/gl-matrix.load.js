montageDefine("83b66f4","runtime/dependencies/gl-matrix",{dependencies:[],factory:function(e,t,n){var i=window;(function(e,r){"object"==typeof t?n.exports=r(i):"function"==typeof define&&define.amd?define([],function(){return r(e)}):r(e)})(this,function(e){"use strict";function t(e){return a=e}function n(){return a="undefined"!=typeof Float32Array?Float32Array:Array}var i=1e-6,r={};(function(){if("undefined"!=typeof Float32Array){var e=new Float32Array(1),t=new Int32Array(e.buffer);r.invsqrt=function(n){var i=.5*n;e[0]=n;var r=1.5;t[0]=1597463007-(t[0]>>1);var a=e[0];return a*(r-i*a*a)}}else r.invsqrt=function(e){return 1/Math.sqrt(e)}})();var a=null;n();var s={};s.create=function(e){var t=new a(3);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):t[0]=t[1]=t[2]=0,t},s.createFrom=function(e,t,n){var i=new a(3);return i[0]=e,i[1]=t,i[2]=n,i},s.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.equal=function(e,t){return e===t||i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])&&i>Math.abs(e[2]-t[2])},s.add=function(e,t,n){return n&&e!==n?(n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n):(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e)},s.subtract=function(e,t,n){return n&&e!==n?(n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n):(e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e)},s.multiply=function(e,t,n){return n&&e!==n?(n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n):(e[0]*=t[0],e[1]*=t[1],e[2]*=t[2],e)},s.negate=function(e,t){return t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},s.scale=function(e,t,n){return n&&e!==n?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n):(e[0]*=t,e[1]*=t,e[2]*=t,e)},s.normalize=function(e,t){t||(t=e);var n=e[0],i=e[1],r=e[2],a=Math.sqrt(n*n+i*i+r*r);return a?1===a?(t[0]=n,t[1]=i,t[2]=r,t):(a=1/a,t[0]=n*a,t[1]=i*a,t[2]=r*a,t):(t[0]=0,t[1]=0,t[2]=0,t)},s.cross=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=t[0],o=t[1],l=t[2];return n[0]=r*l-a*o,n[1]=a*s-i*l,n[2]=i*o-r*s,n},s.length=function(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)},s.squaredLength=function(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},s.direction=function(e,t,n){n||(n=e);var i=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],s=Math.sqrt(i*i+r*r+a*a);return s?(s=1/s,n[0]=i*s,n[1]=r*s,n[2]=a*s,n):(n[0]=0,n[1]=0,n[2]=0,n)},s.lerp=function(e,t,n,i){return i||(i=e),i[0]=e[0]+n*(t[0]-e[0]),i[1]=e[1]+n*(t[1]-e[1]),i[2]=e[2]+n*(t[2]-e[2]),i},s.dist=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(n*n+i*i+r*r)};var o=null,l=new a(4);s.unproject=function(e,t,n,i,r){r||(r=e),o||(o=m.create());var a=o,s=l;return s[0]=2*(e[0]-i[0])/i[2]-1,s[1]=2*(e[1]-i[1])/i[3]-1,s[2]=2*e[2]-1,s[3]=1,m.multiply(n,t,a),m.inverse(a)?(m.multiplyVec4(a,s),0===s[3]?null:(r[0]=s[0]/s[3],r[1]=s[1]/s[3],r[2]=s[2]/s[3],r)):null};var u=s.createFrom(1,0,0),c=s.createFrom(0,1,0),h=s.createFrom(0,0,1),d=s.create();s.rotationTo=function(e,t,n){n||(n=p.create());var i=s.dot(e,t),r=d;if(i>=1)p.set(v,n);else if(1e-6-1>i)s.cross(u,e,r),1e-6>s.length(r)&&s.cross(c,e,r),1e-6>s.length(r)&&s.cross(h,e,r),s.normalize(r),p.fromAngleAxis(Math.PI,r,n);else{var a=Math.sqrt(2*(1+i)),o=1/a;s.cross(e,t,r),n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[3]=.5*a,p.normalize(n)}return n[3]>1?n[3]=1:-1>n[3]&&(n[3]=-1),n},s.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+"]"};var f={};f.create=function(e){var t=new a(9);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]):t[0]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=0,t},f.createFrom=function(e,t,n,i,r,s,o,l,u){var c=new a(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=r,c[5]=s,c[6]=o,c[7]=l,c[8]=u,c},f.determinant=function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*(u*a-s*l)+n*(-u*r+s*o)+i*(l*r-a*o)},f.inverse=function(e,t){var n,i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=h*o-l*c,m=-h*s+l*u,p=c*s-o*u,v=i*d+r*m+a*p;return v?(n=1/v,t||(t=f.create()),t[0]=d*n,t[1]=(-h*r+a*c)*n,t[2]=(l*r-a*o)*n,t[3]=m*n,t[4]=(h*i-a*u)*n,t[5]=(-l*i+a*s)*n,t[6]=p*n,t[7]=(-c*i+r*u)*n,t[8]=(o*i-r*s)*n,t):null},f.multiply=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=t[0],f=t[1],m=t[2],p=t[3],v=t[4],_=t[5],g=t[6],b=t[7],y=t[8];return n[0]=d*i+f*s+m*u,n[1]=d*r+f*o+m*c,n[2]=d*a+f*l+m*h,n[3]=p*i+v*s+_*u,n[4]=p*r+v*o+_*c,n[5]=p*a+v*l+_*h,n[6]=g*i+b*s+y*u,n[7]=g*r+b*o+y*c,n[8]=g*a+b*l+y*h,n},f.multiplyVec2=function(e,t,n){n||(n=t);var i=t[0],r=t[1];return n[0]=i*e[0]+r*e[3]+e[6],n[1]=i*e[1]+r*e[4]+e[7],n},f.multiplyVec3=function(e,t,n){n||(n=t);var i=t[0],r=t[1],a=t[2];return n[0]=i*e[0]+r*e[3]+a*e[6],n[1]=i*e[1]+r*e[4]+a*e[7],n[2]=i*e[2]+r*e[5]+a*e[8],n},f.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},f.equal=function(e,t){return e===t||i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])&&i>Math.abs(e[2]-t[2])&&i>Math.abs(e[3]-t[3])&&i>Math.abs(e[4]-t[4])&&i>Math.abs(e[5]-t[5])&&i>Math.abs(e[6]-t[6])&&i>Math.abs(e[7]-t[7])&&i>Math.abs(e[8]-t[8])},f.identity=function(e){return e||(e=f.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},f.transpose=function(e,t){if(!t||e===t){var n=e[1],i=e[2],r=e[5];return e[1]=e[3],e[2]=e[6],e[3]=n,e[5]=e[7],e[6]=i,e[7]=r,e}return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},f.toMat4=function(e,t){return t||(t=m.create()),t[15]=1,t[14]=0,t[13]=0,t[12]=0,t[11]=0,t[10]=e[8],t[9]=e[7],t[8]=e[6],t[7]=0,t[6]=e[5],t[5]=e[4],t[4]=e[3],t[3]=0,t[2]=e[2],t[1]=e[1],t[0]=e[0],t},f.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+"]"};var m={};m.create=function(e){var t=new a(16);return e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},m.createFrom=function(e,t,n,i,r,s,o,l,u,c,h,d,f,m,p,v){var _=new a(16);return _[0]=e,_[1]=t,_[2]=n,_[3]=i,_[4]=r,_[5]=s,_[6]=o,_[7]=l,_[8]=u,_[9]=c,_[10]=h,_[11]=d,_[12]=f,_[13]=m,_[14]=p,_[15]=v,_},m.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},m.equal=function(e,t){return e===t||i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])&&i>Math.abs(e[2]-t[2])&&i>Math.abs(e[3]-t[3])&&i>Math.abs(e[4]-t[4])&&i>Math.abs(e[5]-t[5])&&i>Math.abs(e[6]-t[6])&&i>Math.abs(e[7]-t[7])&&i>Math.abs(e[8]-t[8])&&i>Math.abs(e[9]-t[9])&&i>Math.abs(e[10]-t[10])&&i>Math.abs(e[11]-t[11])&&i>Math.abs(e[12]-t[12])&&i>Math.abs(e[13]-t[13])&&i>Math.abs(e[14]-t[14])&&i>Math.abs(e[15]-t[15])},m.identity=function(e){return e||(e=m.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},m.transpose=function(e,t){if(!t||e===t){var n=e[1],i=e[2],r=e[3],a=e[6],s=e[7],o=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=n,e[6]=e[9],e[7]=e[13],e[8]=i,e[9]=a,e[11]=e[14],e[12]=r,e[13]=s,e[14]=o,e}return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},m.determinant=function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],m=e[13],p=e[14],v=e[15];return f*c*o*r-u*m*o*r-f*s*h*r+a*m*h*r+u*s*p*r-a*c*p*r-f*c*i*l+u*m*i*l+f*n*h*l-t*m*h*l-u*n*p*l+t*c*p*l+f*s*i*d-a*m*i*d-f*n*o*d+t*m*o*d+a*n*p*d-t*s*p*d-u*s*i*v+a*c*i*v+u*n*o*v-t*c*o*v-a*n*h*v+t*s*h*v},m.inverse=function(e,t){t||(t=e);var n,i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],m=e[11],p=e[12],v=e[13],_=e[14],g=e[15],b=i*l-r*o,y=i*u-a*o,w=i*c-s*o,D=r*u-a*l,E=r*c-s*l,S=a*c-s*u,T=h*v-d*p,C=h*_-f*p,O=h*g-m*p,P=d*_-f*v,M=d*g-m*v,I=f*g-m*_,x=b*I-y*M+w*P+D*O-E*C+S*T;return x?(n=1/x,t[0]=(l*I-u*M+c*P)*n,t[1]=(-r*I+a*M-s*P)*n,t[2]=(v*S-_*E+g*D)*n,t[3]=(-d*S+f*E-m*D)*n,t[4]=(-o*I+u*O-c*C)*n,t[5]=(i*I-a*O+s*C)*n,t[6]=(-p*S+_*w-g*y)*n,t[7]=(h*S-f*w+m*y)*n,t[8]=(o*M-l*O+c*T)*n,t[9]=(-i*M+r*O-s*T)*n,t[10]=(p*E-v*w+g*b)*n,t[11]=(-h*E+d*w-m*b)*n,t[12]=(-o*P+l*C-u*T)*n,t[13]=(i*P-r*C+a*T)*n,t[14]=(-p*D+v*y-_*b)*n,t[15]=(h*D-d*y+f*b)*n,t):null},m.toRotationMat=function(e,t){return t||(t=m.create()),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},m.toMat3=function(e,t){return t||(t=f.create()),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},m.toInverseMat3=function(e,t){var n,i=e[0],r=e[1],a=e[2],s=e[4],o=e[5],l=e[6],u=e[8],c=e[9],h=e[10],d=h*o-l*c,m=-h*s+l*u,p=c*s-o*u,v=i*d+r*m+a*p;return v?(n=1/v,t||(t=f.create()),t[0]=d*n,t[1]=(-h*r+a*c)*n,t[2]=(l*r-a*o)*n,t[3]=m*n,t[4]=(h*i-a*u)*n,t[5]=(-l*i+a*s)*n,t[6]=p*n,t[7]=(-c*i+r*u)*n,t[8]=(o*i-r*s)*n,t):null},m.multiply=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],m=e[11],p=e[12],v=e[13],_=e[14],g=e[15],b=t[0],y=t[1],w=t[2],D=t[3];return n[0]=b*i+y*o+w*h+D*p,n[1]=b*r+y*l+w*d+D*v,n[2]=b*a+y*u+w*f+D*_,n[3]=b*s+y*c+w*m+D*g,b=t[4],y=t[5],w=t[6],D=t[7],n[4]=b*i+y*o+w*h+D*p,n[5]=b*r+y*l+w*d+D*v,n[6]=b*a+y*u+w*f+D*_,n[7]=b*s+y*c+w*m+D*g,b=t[8],y=t[9],w=t[10],D=t[11],n[8]=b*i+y*o+w*h+D*p,n[9]=b*r+y*l+w*d+D*v,n[10]=b*a+y*u+w*f+D*_,n[11]=b*s+y*c+w*m+D*g,b=t[12],y=t[13],w=t[14],D=t[15],n[12]=b*i+y*o+w*h+D*p,n[13]=b*r+y*l+w*d+D*v,n[14]=b*a+y*u+w*f+D*_,n[15]=b*s+y*c+w*m+D*g,n},m.multiply3=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],m=e[11],p=e[12],v=e[13],_=e[14],g=e[15],b=t[0],y=t[1],w=t[2],D=0;return n[0]=b*i+y*o+w*h+D*p,n[1]=b*r+y*l+w*d+D*v,n[2]=b*a+y*u+w*f+D*_,n[3]=b*s+y*c+w*m+D*g,b=t[4],y=t[5],w=t[6],D=0,n[4]=b*i+y*o+w*h+D*p,n[5]=b*r+y*l+w*d+D*v,n[6]=b*a+y*u+w*f+D*_,n[7]=b*s+y*c+w*m+D*g,b=t[8],y=t[9],w=t[10],D=0,n[8]=b*i+y*o+w*h+D*p,n[9]=b*r+y*l+w*d+D*v,n[10]=b*a+y*u+w*f+D*_,n[11]=b*s+y*c+w*m+D*g,n},m.multiplyVec3=function(e,t,n){n||(n=t);var i=t[0],r=t[1],a=t[2];return n[0]=e[0]*i+e[4]*r+e[8]*a+e[12],n[1]=e[1]*i+e[5]*r+e[9]*a+e[13],n[2]=e[2]*i+e[6]*r+e[10]*a+e[14],n},m.rotateVec3=function(e,t,n){n||(n=t);var i=t[0],r=t[1],a=t[2];return n[0]=e[0]*i+e[4]*r+e[8]*a,n[1]=e[1]*i+e[5]*r+e[9]*a,n[2]=e[2]*i+e[6]*r+e[10]*a,n},m.multiplyVec4=function(e,t,n){n||(n=t);var i=t[0],r=t[1],a=t[2],s=t[3];return n[0]=e[0]*i+e[4]*r+e[8]*a+e[12]*s,n[1]=e[1]*i+e[5]*r+e[9]*a+e[13]*s,n[2]=e[2]*i+e[6]*r+e[10]*a+e[14]*s,n[3]=e[3]*i+e[7]*r+e[11]*a+e[15]*s,n},m.translate=function(e,t,n){var i,r,a,s,o,l,u,c,h,d,f,m,p=t[0],v=t[1],_=t[2];return n&&e!==n?(i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],m=e[11],n[0]=i,n[1]=r,n[2]=a,n[3]=s,n[4]=o,n[5]=l,n[6]=u,n[7]=c,n[8]=h,n[9]=d,n[10]=f,n[11]=m,n[12]=i*p+o*v+h*_+e[12],n[13]=r*p+l*v+d*_+e[13],n[14]=a*p+u*v+f*_+e[14],n[15]=s*p+c*v+m*_+e[15],n):(e[12]=e[0]*p+e[4]*v+e[8]*_+e[12],e[13]=e[1]*p+e[5]*v+e[9]*_+e[13],e[14]=e[2]*p+e[6]*v+e[10]*_+e[14],e[15]=e[3]*p+e[7]*v+e[11]*_+e[15],e)},m.scale=function(e,t,n){var i=t[0],r=t[1],a=t[2];return n&&e!==n?(n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11]*a,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n):(e[0]*=i,e[1]*=i,e[2]*=i,e[3]*=i,e[4]*=r,e[5]*=r,e[6]*=r,e[7]*=r,e[8]*=a,e[9]*=a,e[10]*=a,e[11]*=a,e)},m.rotate=function(e,t,n,i){var r,a,s,o,l,u,c,h,d,f,m,p,v,_,g,b,y,w,D,E,S,T,C,O,P=n[0],M=n[1],I=n[2],x=Math.sqrt(P*P+M*M+I*I);return x?(1!==x&&(x=1/x,P*=x,M*=x,I*=x),r=Math.sin(t),a=Math.cos(t),s=1-a,o=e[0],l=e[1],u=e[2],c=e[3],h=e[4],d=e[5],f=e[6],m=e[7],p=e[8],v=e[9],_=e[10],g=e[11],b=P*P*s+a,y=M*P*s+I*r,w=I*P*s-M*r,D=P*M*s-I*r,E=M*M*s+a,S=I*M*s+P*r,T=P*I*s+M*r,C=M*I*s-P*r,O=I*I*s+a,i?e!==i&&(i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]):i=e,i[0]=o*b+h*y+p*w,i[1]=l*b+d*y+v*w,i[2]=u*b+f*y+_*w,i[3]=c*b+m*y+g*w,i[4]=o*D+h*E+p*S,i[5]=l*D+d*E+v*S,i[6]=u*D+f*E+_*S,i[7]=c*D+m*E+g*S,i[8]=o*T+h*C+p*O,i[9]=l*T+d*C+v*O,i[10]=u*T+f*C+_*O,i[11]=c*T+m*C+g*O,i):null},m.rotateX=function(e,t,n){var i=Math.sin(t),r=Math.cos(t),a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];return n?e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[4]=a*r+u*i,n[5]=s*r+c*i,n[6]=o*r+h*i,n[7]=l*r+d*i,n[8]=a*-i+u*r,n[9]=s*-i+c*r,n[10]=o*-i+h*r,n[11]=l*-i+d*r,n},m.rotateY=function(e,t,n){var i=Math.sin(t),r=Math.cos(t),a=e[0],s=e[1],o=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];return n?e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[0]=a*r+u*-i,n[1]=s*r+c*-i,n[2]=o*r+h*-i,n[3]=l*r+d*-i,n[8]=a*i+u*r,n[9]=s*i+c*r,n[10]=o*i+h*r,n[11]=l*i+d*r,n},m.rotateZ=function(e,t,n){var i=Math.sin(t),r=Math.cos(t),a=e[0],s=e[1],o=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return n?e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[0]=a*r+u*i,n[1]=s*r+c*i,n[2]=o*r+h*i,n[3]=l*r+d*i,n[4]=a*-i+u*r,n[5]=s*-i+c*r,n[6]=o*-i+h*r,n[7]=l*-i+d*r,n},m.frustum=function(e,t,n,i,r,a,s){s||(s=m.create());var o=t-e,l=i-n,u=a-r;return s[0]=2*r/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*r/l,s[6]=0,s[7]=0,s[8]=(t+e)/o,s[9]=(i+n)/l,s[10]=-(a+r)/u,s[11]=-1,s[12]=0,s[13]=0,s[14]=-(2*a*r)/u,s[15]=0,s},m.perspective=function(e,t,n,i,r){var a=n*Math.tan(e*Math.PI/360),s=a*t;return m.frustum(-s,s,-a,a,n,i,r)},m.ortho=function(e,t,n,i,r,a,s){s||(s=m.create());var o=t-e,l=i-n,u=a-r;return s[0]=2/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2/u,s[11]=0,s[12]=-(e+t)/o,s[13]=-(i+n)/l,s[14]=-(a+r)/u,s[15]=1,s},m.lookAt=function(e,t,n,i){i||(i=m.create());var r,a,s,o,l,u,c,h,d,f,p=e[0],v=e[1],_=e[2],g=n[0],b=n[1],y=n[2],w=t[0],D=t[1],E=t[2];return p===w&&v===D&&_===E?m.identity(i):(c=p-w,h=v-D,d=_-E,f=1/Math.sqrt(c*c+h*h+d*d),c*=f,h*=f,d*=f,r=b*d-y*h,a=y*c-g*d,s=g*h-b*c,f=Math.sqrt(r*r+a*a+s*s),f?(f=1/f,r*=f,a*=f,s*=f):(r=0,a=0,s=0),o=h*s-d*a,l=d*r-c*s,u=c*a-h*r,f=Math.sqrt(o*o+l*l+u*u),f?(f=1/f,o*=f,l*=f,u*=f):(o=0,l=0,u=0),i[0]=r,i[1]=o,i[2]=c,i[3]=0,i[4]=a,i[5]=l,i[6]=h,i[7]=0,i[8]=s,i[9]=u,i[10]=d,i[11]=0,i[12]=-(r*p+a*v+s*_),i[13]=-(o*p+l*v+u*_),i[14]=-(c*p+h*v+d*_),i[15]=1,i)},m.fromRotationTranslation=function(e,t,n){n||(n=m.create());var i=e[0],r=e[1],a=e[2],s=e[3],o=i+i,l=r+r,u=a+a,c=i*o,h=i*l,d=i*u,f=r*l,p=r*u,v=a*u,_=s*o,g=s*l,b=s*u;return n[0]=1-(f+v),n[1]=h+b,n[2]=d-g,n[3]=0,n[4]=h-b,n[5]=1-(c+v),n[6]=p+_,n[7]=0,n[8]=d+g,n[9]=p-_,n[10]=1-(c+f),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},m.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+"]"};var p={};p.create=function(e){var t=new a(4);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t[0]=t[1]=t[2]=t[3]=0,t},p.createFrom=function(e,t,n,i){var r=new a(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r},p.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},p.equal=function(e,t){return e===t||i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])&&i>Math.abs(e[2]-t[2])&&i>Math.abs(e[3]-t[3])},p.identity=function(e){return e||(e=p.create()),e[0]=0,e[1]=0,e[2]=0,e[3]=1,e};var v=p.identity();p.calculateW=function(e,t){var n=e[0],i=e[1],r=e[2];return t&&e!==t?(t[0]=n,t[1]=i,t[2]=r,t[3]=-Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t):(e[3]=-Math.sqrt(Math.abs(1-n*n-i*i-r*r)),e)},p.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},p.inverse=function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],s=n*n+i*i+r*r+a*a,o=s?1/s:0;return t&&e!==t?(t[0]=-e[0]*o,t[1]=-e[1]*o,t[2]=-e[2]*o,t[3]=e[3]*o,t):(e[0]*=-o,e[1]*=-o,e[2]*=-o,e[3]*=o,e)},p.conjugate=function(e,t){return t&&e!==t?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t):(e[0]*=-1,e[1]*=-1,e[2]*=-1,e)},p.length=function(e){var t=e[0],n=e[1],i=e[2],r=e[3];return Math.sqrt(t*t+n*n+i*i+r*r)},p.normalize=function(e,t){t||(t=e);var n=e[0],i=e[1],r=e[2],a=e[3],s=Math.sqrt(n*n+i*i+r*r+a*a);return 0===s?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t):(s=1/s,t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=a*s,t)},p.add=function(e,t,n){return n&&e!==n?(n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n):(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e)},p.multiply=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=e[3],o=t[0],l=t[1],u=t[2],c=t[3];return n[0]=i*c+s*o+r*u-a*l,n[1]=r*c+s*l+a*o-i*u,n[2]=a*c+s*u+i*l-r*o,n[3]=s*c-i*o-r*l-a*u,n},p.multiplyVec3=function(e,t,n){n||(n=t);var i=t[0],r=t[1],a=t[2],s=e[0],o=e[1],l=e[2],u=e[3],c=u*i+o*a-l*r,h=u*r+l*i-s*a,d=u*a+s*r-o*i,f=-s*i-o*r-l*a;return n[0]=c*u+f*-s+h*-l-d*-o,n[1]=h*u+f*-o+d*-s-c*-l,n[2]=d*u+f*-l+c*-o-h*-s,n},p.scale=function(e,t,n){return n&&e!==n?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n):(e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e)},p.toMat3=function(e,t){t||(t=f.create());var n=e[0],i=e[1],r=e[2],a=e[3],s=n+n,o=i+i,l=r+r,u=n*s,c=n*o,h=n*l,d=i*o,m=i*l,p=r*l,v=a*s,_=a*o,g=a*l;return t[0]=1-(d+p),t[1]=c+g,t[2]=h-_,t[3]=c-g,t[4]=1-(u+p),t[5]=m+v,t[6]=h+_,t[7]=m-v,t[8]=1-(u+d),t},p.toMat4=function(e,t){t||(t=m.create());var n=e[0],i=e[1],r=e[2],a=e[3],s=n+n,o=i+i,l=r+r,u=n*s,c=n*o,h=n*l,d=i*o,f=i*l,p=r*l,v=a*s,_=a*o,g=a*l;return t[0]=1-(d+p),t[1]=c+g,t[2]=h-_,t[3]=0,t[4]=c-g,t[5]=1-(u+p),t[6]=f+v,t[7]=0,t[8]=h+_,t[9]=f-v,t[10]=1-(u+d),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.slerp=function(e,t,n,i){i||(i=e);var r,a,s,o,l=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],u=1;return 0>l&&(l=-l,u=-1),Math.abs(l)>=1?(i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),i):(r=Math.acos(l),a=Math.sqrt(1-l*l),.001>Math.abs(a)?(i[0]=.5*e[0]+.5*t[0],i[1]=.5*e[1]+.5*t[1],i[2]=.5*e[2]+.5*t[2],i[3]=.5*e[3]+.5*t[3],i):(s=Math.sin((1-n)*r)/a,o=Math.sin(n*r)/a,i[0]=e[0]*s+t[0]*u*o,i[1]=e[1]*s+t[1]*u*o,i[2]=e[2]*s+t[2]*u*o,i[3]=e[3]*s+t[3]*u*o,i))},p.fromRotationMatrix=function(e,t){t||(t=p.create());var n=f.create();f.transpose(e,n);var i,r=n[0]+n[4]+n[8];if(r>0)i=Math.sqrt(r+1),t[3]=.5*i,i=.5/i,t[0]=(n[7]-n[5])*i,t[1]=(n[2]-n[6])*i,t[2]=(n[3]-n[1])*i;else{var a=p.fromRotationMatrix.s_iNext=p.fromRotationMatrix.s_iNext||[1,2,0],s=0;n[4]>n[0]&&(s=1),n[8]>n[3*s+s]&&(s=2);var o=a[s],l=a[o];i=Math.sqrt(n[3*s+s]-n[3*o+o]-n[3*l+l]+1),t[s]=.5*i,i=.5/i,t[3]=(n[3*l+o]-n[3*o+l])*i,t[o]=(n[3*o+s]+n[3*s+o])*i,t[l]=(n[3*l+s]+n[3*s+l])*i}return t},f.toQuat4=p.fromRotationMatrix,function(){var e=f.create();p.fromAxes=function(t,n,i,r){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=t[0],e[5]=t[1],e[8]=t[2],p.fromRotationMatrix(e,r)}}(),p.identity=function(e){return e||(e=p.create()),e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.fromAngleAxis=function(e,t,n){n||(n=p.create());var i=.5*e,r=Math.sin(i);return n[3]=Math.cos(i),n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n},p.toAngleAxis=function(e,t){t||(t=e);var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(n>0){t[3]=2*Math.acos(e[3]);var i=r.invsqrt(n);t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i}else t[3]=0,t[0]=1,t[1]=0,t[2]=0;return t},p.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"};var _={};_.create=function(e){var t=new a(2);return e?(t[0]=e[0],t[1]=e[1]):(t[0]=0,t[1]=0),t},_.createFrom=function(e,t){var n=new a(2);return n[0]=e,n[1]=t,n},_.add=function(e,t,n){return n||(n=t),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n},_.subtract=function(e,t,n){return n||(n=t),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n},_.multiply=function(e,t,n){return n||(n=t),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n},_.divide=function(e,t,n){return n||(n=t),n[0]=e[0]/t[0],n[1]=e[1]/t[1],n},_.scale=function(e,t,n){return n||(n=e),n[0]=e[0]*t,n[1]=e[1]*t,n},_.dist=function(e,t){var n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)},_.set=function(e,t){return t[0]=e[0],t[1]=e[1],t},_.equal=function(e,t){return e===t||i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])},_.negate=function(e,t){return t||(t=e),t[0]=-e[0],t[1]=-e[1],t},_.normalize=function(e,t){t||(t=e);var n=e[0]*e[0]+e[1]*e[1];return n>0?(n=Math.sqrt(n),t[0]=e[0]/n,t[1]=e[1]/n):t[0]=t[1]=0,t},_.cross=function(e,t,n){var i=e[0]*t[1]-e[1]*t[0];return n?(n[0]=n[1]=0,n[2]=i,n):i},_.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},_.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},_.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},_.direction=function(e,t,n){n||(n=e);var i=e[0]-t[0],r=e[1]-t[1],a=i*i+r*r;return a?(a=1/Math.sqrt(a),n[0]=i*a,n[1]=r*a,n):(n[0]=0,n[1]=0,n[2]=0,n)},_.lerp=function(e,t,n,i){return i||(i=e),i[0]=e[0]+n*(t[0]-e[0]),i[1]=e[1]+n*(t[1]-e[1]),i},_.str=function(e){return"["+e[0]+", "+e[1]+"]"};var g={};g.create=function(e){var t=new a(4);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t[0]=t[1]=t[2]=t[3]=0,t},g.createFrom=function(e,t,n,i){var r=new a(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r},g.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},g.equal=function(e,t){return e===t||i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])&&i>Math.abs(e[2]-t[2])&&i>Math.abs(e[3]-t[3])},g.identity=function(e){return e||(e=g.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},g.transpose=function(e,t){if(!t||e===t){var n=e[1];return e[1]=e[2],e[2]=n,e}return t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t},g.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},g.inverse=function(e,t){t||(t=e);var n=e[0],i=e[1],r=e[2],a=e[3],s=n*a-r*i;return s?(s=1/s,t[0]=a*s,t[1]=-i*s,t[2]=-r*s,t[3]=n*s,t):null},g.multiply=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=e[3];return n[0]=i*t[0]+r*t[2],n[1]=i*t[1]+r*t[3],n[2]=a*t[0]+s*t[2],n[3]=a*t[1]+s*t[3],n},g.rotate=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(t),l=Math.cos(t);return n[0]=i*l+r*o,n[1]=i*-o+r*l,n[2]=a*l+s*o,n[3]=a*-o+s*l,n},g.multiplyVec2=function(e,t,n){n||(n=t);var i=t[0],r=t[1];return n[0]=i*e[0]+r*e[1],n[1]=i*e[2]+r*e[3],n},g.scale=function(e,t,n){n||(n=e);var i=e[0],r=e[1],a=e[2],s=e[3],o=t[0],l=t[1];return n[0]=i*o,n[1]=r*l,n[2]=a*o,n[3]=s*l,n},g.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"};var b={};return b.create=function(e){var t=new a(4);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},b.createFrom=function(e,t,n,i){var r=new a(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r},b.add=function(e,t,n){return n||(n=t),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},b.subtract=function(e,t,n){return n||(n=t),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},b.multiply=function(e,t,n){return n||(n=t),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n[3]=e[3]*t[3],n},b.divide=function(e,t,n){return n||(n=t),n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n[3]=e[3]/t[3],n},b.scale=function(e,t,n){return n||(n=e),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},b.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},b.equal=function(e,t){return e===t||i>Math.abs(e[0]-t[0])&&i>Math.abs(e[1]-t[1])&&i>Math.abs(e[2]-t[2])&&i>Math.abs(e[3]-t[3])},b.negate=function(e,t){return t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},b.length=function(e){var t=e[0],n=e[1],i=e[2],r=e[3];return Math.sqrt(t*t+n*n+i*i+r*r)},b.squaredLength=function(e){var t=e[0],n=e[1],i=e[2],r=e[3];return t*t+n*n+i*i+r*r},b.lerp=function(e,t,n,i){return i||(i=e),i[0]=e[0]+n*(t[0]-e[0]),i[1]=e[1]+n*(t[1]-e[1]),i[2]=e[2]+n*(t[2]-e[2]),i[3]=e[3]+n*(t[3]-e[3]),i},b.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"},e&&(e.glMatrixArrayType=a,e.MatrixArray=a,e.setMatrixArrayType=t,e.determineMatrixArrayType=n,e.glMath=r,e.vec2=_,e.vec3=s,e.vec4=b,e.mat2=g,e.mat3=f,e.mat4=m,e.quat4=p),{glMatrixArrayType:a,MatrixArray:a,setMatrixArrayType:t,determineMatrixArrayType:n,glMath:r,vec2:_,vec3:s,vec4:b,mat2:g,mat3:f,mat4:m,quat4:p}})}});
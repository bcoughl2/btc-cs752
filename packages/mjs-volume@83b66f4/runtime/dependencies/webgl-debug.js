WebGLDebugUtils=function(){function e(e){if(null==m){m={};for(var t in e)"number"==typeof e[t]&&(m[e[t]]=t)}}function t(){if(null==m)throw"WebGLDebugUtils.init(ctx) not called"}function n(e){return t(),void 0!==m[e]}function i(e){t();var n=m[e];return void 0!==n?"gl."+n:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function r(e,t,n,r){var a=d[e];if(void 0!==a){var a=a[t];if(void 0!==a&&a[n])return i(r)}return null===r?"null":void 0===r?"undefined":""+r}function a(e,t){for(var n="",i=t.length,a=0;i>a;++a)n+=(0==a?"":", ")+r(e,i,a,t[a]);return n}function s(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function o(t,n,a){function o(e,t){return function(){a&&a(t,arguments);var i=e[t].apply(e,arguments),r=e.getError();return 0!=r&&(l[r]=!0,n(r,t,arguments)),i}}e(t),n=n||function(e,t,n){for(var a="",s=n.length,o=0;s>o;++o)a+=(0==o?"":", ")+r(t,s,o,n[o]);h("WebGL error "+i(e)+" in "+t+"("+a+")")};var l={},u={};for(var c in t)"function"==typeof t[c]?u[c]=o(t,c):s(u,t,c);return u.getError=function(){for(var e in l)if(l.hasOwnProperty(e)&&l[e])return l[e]=!1,e;return t.NO_ERROR},u}function l(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var i=0;t>i;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0);e.deleteBuffer(n);for(var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),i=0;r>i;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function u(e){function t(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}function n(e){var t=e.addEventListener;e.addEventListener=function(n,i){switch(n){case"webglcontextlost":D(i);break;case"webglcontextrestored":S(i);break;default:t.apply(e,arguments)}}}function i(){for(var e=Object.keys(C),t=0;e.length>t;++t)delete C[e]}function r(){++b,_||g==b&&e.loseContext()}function a(e,t){var n=e[t];return function(){if(r(),!_){var t=n.apply(e,arguments);return t}}}function o(){for(var e=0;v.length>e;++e){var t=v[e];t instanceof WebGLBuffer?h.deleteBuffer(t):t instanceof WebGLFramebuffer?h.deleteFramebuffer(t):t instanceof WebGLProgram?h.deleteProgram(t):t instanceof WebGLRenderbuffer?h.deleteRenderbuffer(t):t instanceof WebGLShader?h.deleteShader(t):t instanceof WebGLTexture&&h.deleteTexture(t)}}function u(e){return{statusMessage:e,preventDefault:function(){y=!0}}}function c(e){for(var t in e)"function"==typeof e[t]?d[t]=a(e,t):s(d,e,t);d.getError=function(){if(r(),!_)for(var e;e=h.getError();)C[e]=!0;for(var e in C)if(C[e])return delete C[e],e;return d.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],i=0;n.length>i;++i){var o=n[i];d[o]=function(t){return function(){if(r(),_)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=p,v.push(n),n}}(e[o])}for(var l=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],i=0;l.length>i;++i){var o=l[i];d[o]=function(t){return function(){return r(),_?null:t.apply(e,arguments)}}(d[o])}for(var u=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],i=0;u.length>i;++i){var o=u[i];d[o]=function(t){return function(){return r(),_?!1:t.apply(e,arguments)}}(d[o])}return d.checkFramebufferStatus=function(t){return function(){return r(),_?d.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(d.checkFramebufferStatus),d.getAttribLocation=function(t){return function(){return r(),_?-1:t.apply(e,arguments)}}(d.getAttribLocation),d.getVertexAttribOffset=function(t){return function(){return r(),_?0:t.apply(e,arguments)}}(d.getVertexAttribOffset),d.isContextLost=function(){return _},d}var h,d,m=[],f=[],d={},p=1,_=!1,v=[],g=0,b=0,y=!1,w=0,C={};e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=h){if(h)throw"got different context";h=n,d=c(h)}return d}return n}}(e.getContext);var D=function(e){m.push(t(e))},S=function(e){f.push(t(e))};return n(e),e.loseContext=function(){if(!_){for(_=!0,g=0,++p;h.getError(););i(),C[h.CONTEXT_LOST_WEBGL]=!0;var t=u("context lost"),n=m.slice();setTimeout(function(){for(var i=0;n.length>i;++i)n[i](t);w>=0&&setTimeout(function(){e.restoreContext()},w)},0)}},e.restoreContext=function(){_&&f.length&&setTimeout(function(){if(!y)throw"can not restore. webglcontestlost listener did not call event.preventDefault";o(),l(h),_=!1,b=0,y=!1;for(var e=f.slice(),t=u("context restored"),n=0;e.length>n;++n)e[n](t)},0)},e.loseContextInNCalls=function(e){if(_)throw"You can not ask a lost contet to be lost";g=b+e},e.getNumCalls=function(){return b},e.setRestoreTimeout=function(e){w=e},e}var c=function(e){window.console&&window.console.log&&window.console.log(e)},h=function(e){window.console&&window.console.error?window.console.error(e):c(e)},d={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:!0}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}}},m=null;return{init:e,mightBeEnum:n,glEnumToString:i,glFunctionArgToString:r,glFunctionArgsToString:a,makeDebugContext:o,makeLostContextSimulatingCanvas:u,resetToInitialState:l}}();
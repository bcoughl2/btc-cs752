montageDefine("83b66f4","extras/scene-tree.reel/core/scene-tree-factory",{dependencies:["montage","./scene-tree-node"],factory:function(e,t){var n=e("montage").Montage,i=e("./scene-tree-node"),r=i.SceneTreeNode,a=i.SceneTreeNodeTypes;t.SceneTreeFactory=n.specialize({constructor:{value:function(e){this.super(),this._configuration=e}},_configuration:{value:null},_sceneGraphTree:{value:null},buildWithGlTFTree:{value:function(e){if(e&&"object"==typeof e){var t=this,n=e.children;return this._resetEnvironment(),Array.isArray(n)&&n.forEach(function(e){var n=t._examineNode(e);t._sceneGraphTree.children.push(n)}),this._sceneGraphTree}}},_resetEnvironment:{value:function(){this._sceneGraphTree={children:[],root:!0}}},_examineNode:{value:function(e,t){var n=e.children,i=this._createSceneTreeNode(e,t);if(Array.isArray(n)){var r=this;n.forEach(function(e){var t=r._examineNode(e,i);i.rawChildren[t.name]=t})}return i}},_createSceneTreeNode:{value:function(e,t){var n=new r(e,a.NODE,t),i=e.meshes;return Array.isArray(i)&&this._configuration.get("meshesEnabled")&&i.forEach(function(e){n.rawChildren[e.name]=new r(e,a.MESH,n)}),n}}})}});
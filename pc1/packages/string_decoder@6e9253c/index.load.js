montageDefine("6e9253c","index",{dependencies:["buffer"],factory:function(e,i){function t(e){if(e&&!r(e))throw Error("Unknown encoding: "+e)}function s(e){return e.toString(this.encoding)}function a(e){var i=this.charReceived=e.length%2;return this.charLength=i?2:0,i}function u(e){var i=this.charReceived=e.length%3;return this.charLength=i?3:0,i}var n=e("buffer").Buffer,r=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=i.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),t(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return this.write=s,void 0}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var i="",t=0;this.charLength;){var s=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,t,s),this.charReceived+=s-t,t=s,this.charReceived<this.charLength)return"";i=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var a=i.charCodeAt(i.length-1);if(!(a>=55296&&56319>=a)){if(this.charReceived=this.charLength=0,s==e.length)return i;e=e.slice(s,e.length);break}this.charLength+=this.surrogateSize,i=""}var u=this.detectIncompleteChar(e),n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-u,n),this.charReceived=u,n-=u),i+=e.toString(this.encoding,0,n);var n=i.length-1,a=i.charCodeAt(n);if(a>=55296&&56319>=a){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),this.charBuffer.write(i.charAt(i.length-1),this.encoding),i.substring(0,n)}return i},l.prototype.detectIncompleteChar=function(e){for(var i=e.length>=3?3:e.length;i>0;i--){var t=e[e.length-i];if(1==i&&6==t>>5){this.charLength=2;break}if(2>=i&&14==t>>4){this.charLength=3;break}if(3>=i&&30==t>>3){this.charLength=4;break}}return i},l.prototype.end=function(e){var i="";if(e&&e.length&&(i=this.write(e)),this.charReceived){var t=this.charReceived,s=this.charBuffer,a=this.encoding;i+=s.slice(0,t).toString(a)}return i}}});
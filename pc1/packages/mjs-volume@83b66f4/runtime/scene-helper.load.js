montageDefine("83b66f4","runtime/scene-helper",{dependencies:["runtime/dependencies/gl-matrix","montage","montage/core/uuid","runtime/glTF-scene","runtime/glTF-node","runtime/scene","runtime/node","runtime/scene-renderer","runtime/glTF-material","runtime/utilities","runtime/projection","runtime/camera","collections/set","runtime/material"],factory:function(e,t){e("runtime/dependencies/gl-matrix");var n=e("montage").Montage,i=e("montage/core/uuid").Uuid;e("runtime/glTF-scene").glTFScene;var r=e("runtime/glTF-node").glTFNode;e("runtime/scene").Scene;var a=e("runtime/node").Node;e("runtime/scene-renderer").SceneRenderer,e("runtime/glTF-material").glTFMaterial,e("runtime/utilities").Utilities;var s=e("runtime/projection").Projection,o=e("runtime/camera").Camera;e("runtime/utilities").BBox;var l=e("collections/set"),u=e("runtime/material").Material,c=t.SceneHelper=Object.create(Object.prototype,{getGLTFViewPoints:{value:function(e){var t=[],n=e.glTFElement.rootNode;return n.apply(function(e){return e.cameras&&e.cameras.length&&(t=t.concat(e)),null},!0,null),t}},getViewPoints:{value:function(e){var t=this.getGLTFViewPoints(e),i=[];return t.forEach(function(t){var r=n.create(a);r.scene=e,r.id=t.baseId,i.push(r)},this),i}},createGLTFNodeIncludingCamera:{value:function(e){var t=Object.create(s);t.initWithDescription({type:"perspective",perspective:{yfov:45,aspectRatio:1,znear:.1,zfar:100}});var n=Object.create(o).init();n.projection=t;var a=Object.create(r).init();return n.name=a.name=e,a.id=i.generate(),a.baseId=a.id,a.cameras.push(n),a}},createNodeIncludingCamera:{value:function(e,t){var i=c.createGLTFNodeIncludingCamera(e),r=t.glTFElement;r.ids[i.baseId]=i;var s=n.create(a);return s.scene=t,s.id=i.baseId,s}},getMaterialsFromNode:{value:function(e){var t=e.glTFElement,i=new l,r=e.scene;return null!=t.meshes&&t.meshes.forEach(function(e){e.primitives&&e.primitives.forEach(function(e){var t,a=e.material;null==a.component3D?(t=n.create(u),t.scene=r,t.id=a.baseId,r.glTFElement.ids[a.baseId]=a,a.component3D=t):t=a.component3D,i.add(t)},this)},this),i}},createNodeFromGlTFElementIfNeeded:{value:function(e,t){if(null!=e.component3D)return e.component3D;var n=new a;return t.glTFElement.ids[e.baseId]=e,n.scene=t,n.id=e.baseId,e.component3D=n,n}},createMaterialFromGlTFElementIfNeeded:{value:function(e,t){if(null!=e.component3D)return e.component3D;var n=new u;return t.glTFElement.ids[e.baseId]=e,n.scene=t,n.id=e.baseId,e.component3D=n,n}},getGLTFCamera:{value:function(e){var t=null;if(e.glTFElement){var n=e.glTFElement;null!=n.cameras&&n.cameras.length>0&&(t=n.cameras[0])}return t}}})}});
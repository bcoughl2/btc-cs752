<!DOCTYPE html><html><head>
    <title>Script onerror Test</title>
    <script src=../common.js></script>
    <script>function onTestScriptLoad(e){var t=e.target||e.srcElement;("load"===e.type||readyRegExp.test(t.readyState))&&(log(t.getAttribute("data-name")+" loaded"),t.removeEventListener?t.removeEventListener("load",onTestScriptLoad,!1):t.detachEvent("onreadystatechange",onTestScriptLoad))}function onTestError(e){var t=e.target||e.srcElement;log(t.getAttribute("data-name")+" onerror triggered"),t.removeEventListener?t.removeEventListener("error",onTestError,!1):t.detachEvent("onerror",onTestError)}function attachScript(e,t){var n=document.createElement("script");n.src=e,n.type="text/javascript",n.charset="utf-8",n.setAttribute("data-name",t),n.addEventListener?(n.addEventListener("load",onTestScriptLoad,!1),n.addEventListener("error",onTestError,!1)):(n.attachEvent("onreadystatechange",onTestScriptLoad),n.attachEvent("onerror",onTestError)),document.getElementsByTagName("head")[0].appendChild(n)}var readyRegExp=/complete|loaded/;</script>
</head>
<body>
    <h1>Script onerror Test</h1>

    <p>Test different script loading scenarios to see if an error callback is
    given on the script tag.</p>

    <p>Press the button and check console for output. There should be a log
    message for each button.</p>

    <button onclick="attachScript('ok.js', 'ok')">OK</button>
    <button onclick="attachScript('parseError.js', 'parseError')">Parse Error</button>
    <button onclick="attachScript('scriptError.js', 'scriptError')">Script Error</button>
    <button onclick="attachScript('404.js', '404')">404 Script</button>


</body></html>
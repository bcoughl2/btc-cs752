montageDefine("3c07db4","ui/base/abstract-alert",{dependencies:["../component","../modal-overlay.reel","../../core/promise"],factory:function(e,t){var r=e("../component").Component,n=(e("../modal-overlay.reel").ModalOverlay,e("../../core/promise").Promise);t.AbstractAlert=r.specialize({constructor:{value:function i(){if(this.constructor===i)throw Error("AbstractAlert cannot be instantiated.")}},_overlay:{value:null},_okButton:{value:null},_userActionDeferred:{value:null},title:{value:"Alert"},okLabel:{value:"OK"},message:{value:null},enterDocument:{value:function(e){var t;e&&(t=Object.getPrototypeOf(this).constructor,this===t._instance&&t._nextMessageDeferred.resolve(),this._okButton.addEventListener("action",this,!1))}},show:{value:function(){return this._userActionDeferred||(this._overlay.hasModalMask=!1,this._overlay.show(),this._userActionDeferred=n.defer()),this._userActionDeferred.promise}},handleAction:{value:function(e){e.target===this._okButton&&(this._userActionDeferred.resolve(),this._userActionDeferred=null,this._overlay.hide())}}},{_instance:{value:null},__nextMessageDeferred:{value:null},_nextMessageDeferred:{get:function(){return this.hasOwnProperty("__nextMessageDeferred")||(this.__nextMessageDeferred=n.defer()),this.__nextMessageDeferred}},__nextMessagePromise:{value:null},_nextMessagePromise:{set:function(e){this.__nextMessagePromise=e},get:function(){return this.hasOwnProperty("__nextMessagePromise")||(this.__nextMessagePromise=this._nextMessageDeferred.promise),this.__nextMessagePromise}},_setupInstance:{value:function(){var e;e=this._instance=new this,e.element=e.rootComponent.element.createElement("div"),e.element.ownerDocument.body.appendChild(e.element),e.attachToParentComponent(),e.needsDraw=!0}},show:{value:function(e,t){var r,n=this;return this.hasOwnProperty("_instance")||this._setupInstance(),r=this._instance,this._nextMessagePromise=this._nextMessagePromise.then(function(){return r.title=t?t:n.prototype.title,r.message=e,r.show()})}}})}});
montageDefine("3c07db4","core/meta/binder-reference",{dependencies:["../core","../promise","./remote-reference","./binder","../logger"],factory:function(e,t){"use strict";e("../core").Montage;var r=e("../promise").Promise,n=e("./remote-reference").RemoteReference,i=e("./binder");e("../logger").logger("blueprint"),t.BinderReference=n.create(n,{constructor:{value:function(){this.superForValue("constructor")()}},identifier:{get:function(){return this._reference||(this._reference=this.referenceFromValue(this._value)),["binder",this._reference.binderName.toLowerCase(),"reference"].join("_")}},valueFromReference:{value:function(e,t){var n=e.binderName,a=e.binderModuleId,s=r.defer(),o=i.Binder.manager.binderForName(n);if(o)s.resolve(o);else try{var u=t,l=a.indexOf("/");if(l>0){var c=a.substring(0,l),f=t.mappings;c in f&&(a=a.substring(l+1),u=u.getPackage(f[c].location))}s=i.Binder.getBinderWithModuleId(a,u)}catch(d){s.reject(Error("Error cannot find Blueprint Binder "+a))}return s.promise}},referenceFromValue:{value:function(e){var t={};return t.binderName=e.name,t.binderModuleId=e.binderModuleId,t}}})}});